<div class="system-wrapper-layout p-4">
  <div class="row g-4">
    <div class="col-12 col-lg-8">
      <div class="content-display-module main-data-shadow">
        <div class="header-banner-primary d-flex justify-content-between align-items-center">
          <div>
            <h5 class="mb-0 header-title-text">Gestão de Lotes</h5>
            <small class="helper-subtitle-text">Visualização de registros ativos no sistema</small>
          </div>
        </div>

        <div class="module-body-container p-3">
          <div class="table-responsive">
            <table class="data-management-table align-middle mb-0">
              <thead>
                <tr class="table-header-row">
                  <th style="width: 10%" class="column-header-text">ID</th>
                  <th style="width: 45%" class="column-header-text">Identificação do Lote</th>
                  <th style="width: 25%" class="column-header-text">Criação</th>
                  <th style="width: 20%" class="text-end column-header-text">Ações</th>
                </tr>
              </thead>
              <tbody>
                @for (item of batchList(); track item.batchId) {
                <tr class="data-record-item">
                  <td class="cell-id-marker">#{{ $index + 1 }}</td>
                  <td class="cell-primary-text">{{ item.batchName }}</td>
                  <td class="cell-secondary-text">{{ item.createdDate | date : 'dd/MM/yyyy' }}</td>
                  <td class="text-end">
                    <button
                      class="btn btn-sm action-btn-edit me-2"
                      title="Editar"
                      (click)="onEditBatch(item)"
                    >
                      <i class="bi bi-pencil-square"></i>
                    </button>
                    <button
                      class="btn btn-sm action-btn-delete"
                      title="Excluir"
                      (click)="onDeleteBatch(item.batchId)"
                    >
                      <i class="bi bi-trash"></i>
                    </button>
                  </td>
                </tr>
                } @empty {
                <tr class="status-empty-row">
                  <td colspan="4" class="text-center py-5 feedback-empty-text">
                    <i class="bi bi-exclamation-triangle me-2"></i>
                    Nenhum lote encontrado na base de dados.
                  </td>
                </tr>
                }
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="col-12 col-lg-4">
      <div class="content-form-module side-panel-accent">
        <div class="header-banner-dark">
          <h5 class="mb-0 header-title-text">Adicionar Lote</h5>
        </div>
        <div class="module-body-container">
          <form class="data-entry-form">
            <div class="mb-4 form-group-spacing">
              <label class="form-label control-label-bold">Nome do Lote</label>
              <input
                class="form-control input-control-styled"
                type="text"
                placeholder="Ex: Lote Especial Outono"
                [(ngModel)]="newBatchObj.batchName"
                name="batchName"
              />
            </div>

            <div class="mb-4 form-group-spacing">
              <label class="form-label control-label-bold">Data de Registro</label>
              <input
                class="form-control input-control-styled"
                type="date"
                [(ngModel)]="newBatchObj.createdDate"
                name="createdDate"
              />
            </div>

            <div class="d-grid gap-3 action-stack-container">
              @if(newBatchObj.batchId == 0) {
              <button type="button" (click)="onSaveBatch()" class="btn btn-trigger-submit">
                Confirmar Registro
              </button>
              } @else {
              <button type="button" (click)="onUpdateBatch()" class="btn btn-trigger-update">
                Atualizar Registro
              </button>
              }
              <button type="button" class="btn btn-trigger-cancel">Cancelar Operação</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
